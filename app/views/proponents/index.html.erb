<p style="color: green"><%= notice %></p>

<h1>Proponents</h1>

<div class="row">
  <div class="col-md-6"
      data-controller="pie-chart"
      data-pie-chart-labels='<%= @salary_distribution.keys.to_json.html_safe %>'
      data-pie-chart-data="<%= @salary_distribution.values.to_json.html_safe %>">
    
    <canvas data-pie-chart-target="canvas" id="myPieChart" width="400" height="400"></canvas>
  </div>
  <div class="col-md-6">
    <h3>Salary distribution</h3>
    <ul>
      <% @salary_distribution.each do |key, value| %>
        <li><%= key %>: <%= value %></li>
      <% end %>
    </ul>
  </div>
</div>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>CPF</th>
      <th>Address</th>
      <th>Salary</th>
      <th>INSS Discount</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @proponents.each do |proponent| %>
      <tr>
        <td><%= proponent.name %></td>
        <td><%= proponent.cpf %></td>
        <td><%= address_formatted(proponent) %></td>
        <td><%= proponent.formatted_salary %></td>
        <td><%= proponent.inss_discount %></td>
        <td><%= link_to 'Show', proponent %></td>
        <td><%= link_to 'Edit', edit_proponent_path(proponent) %></td>
        <td><%= link_to 'Destroy', proponent, method: :delete, data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @proponents %>

<%= link_to "New proponent", new_proponent_path %>
